namespace Library.Data.SqlServer.Builders;

public partial class SqlStatementBuilder
{
    private static string AddBrackets(in string entity)
    {
        var entities = entity.Split('.');
        var result = entities.Select(e =>
        {
            var r = e.StartsWith("[") ? e : $"[{e}";
            r = r.EndsWith("]") ? r : $"{r}]";
            return r;
        }).Merge('.');
        return result;
    }
    private static string FormatValue(object value) => value switch
    {
        int i => i.ToString(),
        float f => f.ToString(),
        decimal d => d.ToString(),
        long l => l.ToString(),
        string and { Length: 0 } => "''",
        string s => $"'{s}'",
        null => DBNull.Value.ToString(),
        _ => $"'{value}'",
    };
    private static StringBuilder AddClause(in string clause, in string indent, in StringBuilder result)
        => result.AppendLine().Append($"{indent}{clause}");
}
